<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Vocaluxe Songs</title>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
/* ===============================
   Variabelen
================================ */
:root{
  --list-font: 0.95em;

  --letters-top: 120px;
  --search-top: 160px;
  --font-top: 30px;
  --content-top: 220px;

  --phone-list-width: 95%;
  --desk-list-width: 1200px;

  --phone-btn-gap: 3px;
  --phone-btn-pad-v: 3px;
  --phone-btn-pad-h: 8px;
  --phone-btn-font-mult: 0.8;

  --desk-btn-gap: 4px;
  --desk-btn-pad-v: 5px;
  --desk-btn-pad-h: 5px;
  --desk-btn-font-mult: 1;
}

/* ===============================
   Basis
================================ */
html{ background:#000; }
body{
  margin:0;
  font-family:Arial,sans-serif;
  color:#fff;
  background-repeat:no-repeat;
  background-position:center top;
  background-size:cover;
  background-attachment:fixed;
  overflow:hidden;
}

/* ===============================
   Desktop
================================ */
@media (min-width:821px){
  body{ background-image:url('BGDESK.png'); }
  :root{ --list-font:1.2em; }
  #song-list{ max-width:var(--desk-list-width); }

  .filter-buttons{ gap:var(--desk-btn-gap); }
  .filter-buttons button{
    font-size:calc(var(--list-font)*var(--desk-btn-font-mult));
    padding:var(--desk-btn-pad-v) var(--desk-btn-pad-h);
  }
}

/* ===============================
   Mobiel
================================ */
@media (max-width:820px){
  body{ background-image:url('BGPHONE.png'); }
  :root{
    --list-font:0.8em;
    --letters-top:10px;
    --search-top:60px;
    --content-top:110px;
    --font-top:10px;
  }

  #song-list{ max-width:var(--phone-list-width); }

  .filter-buttons{ gap:var(--phone-btn-gap); }
  .filter-buttons button{
    font-size:calc(var(--list-font)*var(--phone-btn-font-mult));
    padding:var(--phone-btn-pad-v) var(--phone-btn-pad-h);
  }
}

/* ===============================
   Font + / -
================================ */
.font-controls{
  position:fixed;
  top:var(--font-top);
  right:clamp(12px,4vw,32px);
  display:flex;
  gap:8px;
  z-index:3000;
}

.font-btn{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  background:rgba(0,0,0,.6);
  color:#fff;
  cursor:pointer;
  font-size:1.1em;
}

.font-btn:hover{ background:rgba(255,255,255,.2); }

/* Mobiel: − links / + rechts */
@media (max-width:820px){
  .font-controls{
    left:0;
    right:0;
    justify-content:space-between;
    padding:0 14px;
  }
}

/* ===============================
   Taalfilter – LINKS BOVEN
================================ */
#language-bar{
  position:fixed;
  top:var(--font-top);
  left:clamp(12px,4vw,32px);
  z-index:3000;
}

#language-bar .filter-buttons{
  justify-content:flex-start;
  max-width:none;
}

/* ===============================
   Letterknoppen A-Z
================================ */
#letters-bar{
  position:fixed;
  top:var(--letters-top);
  left:0;
  right:0;
  text-align:center;
  z-index:1100;
}

.filter-buttons{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  margin:0 auto;
}

.filter-buttons button{
  border:none;
  border-radius:6px;
  background:rgba(0,0,0,.6);
  color:#fff;
  cursor:pointer;
}

.filter-buttons button:hover{
  background:rgba(255,255,255,.2);
}

/* ===============================
   Zoekveld
================================ */
#search{
  position:fixed;
  top:var(--search-top);
  left:50%;
  transform:translateX(-50%);
  width:min(90%,520px);
  padding:8px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,.2);
  color:#fff;
  z-index:2000;
}

/* ===============================
   Content
================================ */
.content{
  position:fixed;
  top:var(--content-top);
  left:0;
  right:0;
  bottom:0;
  overflow-y:auto;
  text-align:center;
}

#song-list{
  background:rgba(0,0,0,.6);
  margin:0 auto;
  border-radius:10px;
  padding:10px 0;
}

.line{
  display:flex;
  justify-content:center;
  font-size:var(--list-font);
  padding:4px 0;
}

.left-col,.right-col{
  width:40%;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.left-col{ text-align:right; padding-right:10px; }
.right-col{ text-align:left; padding-left:10px; }
</style>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body>

<!-- TAALFILTER LINKS -->
<div id="language-bar">
  <div class="filter-buttons" id="lang-buttons"></div>
</div>

<!-- FONT CONTROLS RECHTS -->
<div class="font-controls">
  <button id="font-dec" class="font-btn">−</button>
  <button id="font-inc" class="font-btn">+</button>
</div>

<!-- LETTERFILTER -->
<div id="letters-bar">
  <div class="filter-buttons" id="buttons"></div>
</div>

<input id="search" placeholder="Zoek op uitvoerder of titel…">

<div class="content">
  <div id="song-list">Laden…</div>
</div>

<script>
let allSongs=[];
let currentLetter='Alles';
let currentLang='Alle';
let currentSearch='';

function normalizeLang(v){
  v=(v||'').toUpperCase();
  if(v.includes('NEDER')||v.startsWith('NL')) return 'NL';
  if(v.includes('FRANS')||v.startsWith('FR')) return 'FR';
  if(v.includes('DUITS')||v.startsWith('DE')) return 'DU';
  if(v.includes('ANDER')) return 'A';
  return '';
}

function loadSongs(){
  Papa.parse('songs.csv?v='+Date.now(),{
    download:true,
    header:true,
    complete:r=>{
      allSongs=r.data.map(o=>({
        uitvoerder:o.uitvoerder||o.artist||'',
        titel:o.titel||o.title||'',
        taal:normalizeLang(o.taal||o.language)
      })).filter(s=>s.uitvoerder&&s.titel);
      render();
    }
  });
}

function render(){
  let list=[...allSongs];

  if(currentSearch){
    const q=currentSearch.toLowerCase();
    list=list.filter(s=>s.uitvoerder.toLowerCase().includes(q)||s.titel.toLowerCase().includes(q));
  }

  if(currentLetter!=='Alles'){
    if(currentLetter==='#'){
      list=list.filter(s=>!/^[A-Z]/i.test(s.uitvoerder));
    }else{
      list=list.filter(s=>s.uitvoerder.toUpperCase().startsWith(currentLetter));
    }
  }

  if(currentLang!=='Alle'){
    list=list.filter(s=>s.taal===currentLang);
  }

  const box=document.getElementById('song-list');
  box.innerHTML='';
  list.sort((a,b)=>a.uitvoerder.localeCompare(b.uitvoerder,'nl',{sensitivity:'base'}));
  list.forEach(s=>{
    box.innerHTML+=`<div class="line"><div class="left-col">${s.uitvoerder}</div><div class="right-col">${s.titel}</div></div>`;
  });
}

function setup(){
  [...'ABCDEFGHIJKLMNOPQRSTUVWXYZ'].forEach(l=>{
    const b=document.createElement('button');
    b.textContent=l;
    b.onclick=()=>{currentLetter=l;render();}
    buttons.appendChild(b);
  });

  ['Alle','NL','FR','DU','A'].forEach(l=>{
    const b=document.createElement('button');
    b.textContent=l;
    b.onclick=()=>{currentLang=l;render();}
    lang-buttons.appendChild(b);
  });

  search.oninput=e=>{currentSearch=e.target.value;render();};
  loadSongs();
}

let size=1;
font-dec.onclick=()=>{size=Math.max(.5,size-.05);document.documentElement.style.setProperty('--list-font',size+'em');}
font-inc.onclick=()=>{size=Math.min(1.6,size+.05);document.documentElement.style.setProperty('--list-font',size+'em');}

document.addEventListener('DOMContentLoaded',setup);
</script>

</body>
</html>
