
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vocaluxe Songs</title>
  <style>
    :root { --list-font: 1.15em; }

    html, body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      color: white;
      height: 100%;
      background: url('SiteBG.png') no-repeat center top;
      background-size: cover;
      background-attachment: fixed;
      overflow: hidden;
    }

    @media (max-width: 820px) {
      html, body {
        background-size: auto 100%;
        background-position: center top;
      }
    }

    .top-meta { position: fixed; top: 0; left: 0; width: 100%; background: rgba(0,0,0,0.6); z-index: 2000; }
    .top-meta .meta-wrap { max-width: 1100px; margin: 0 auto; display: flex; justify-content: space-between;
      align-items: center; padding: 6px 16px; font-size: 0.95em; }

    .top-bar { position: sticky; top: 100px; width: 100%; text-align: center; z-index: 1000; }
    .filter-row { display: flex; justify-content: center; align-items: center; position: relative; gap: 8px; flex-wrap: wrap; }
    .filter-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; margin-bottom: 10px; }
    .filter-buttons button { padding: 6px 10px; border: none; border-radius: 4px; background-color: rgba(0,0,0,0.6);
      color: white; cursor: pointer; font-size: 1em; }
    .filter-buttons button:hover { background-color: rgba(255,255,255,0.2); }
    #search { padding: 10px; font-size: 1em; width: min(90%,420px); border-radius: 5px; border: none; margin: 6px 0 0; }

    .font-controls-mobile { display: none; position: absolute; left: 50px; top: -40px; gap: 6px; }
    .font-btn { padding: 6px 10px; border: none; border-radius: 4px; background-color: rgba(0,0,0,0.6);
      color: white; cursor: pointer; font-size: 1em; }
    .content { position: absolute; top: 190px; bottom: 0; left: 0; right: 0; overflow-y: auto; text-align: center; }

    #song-list { background: rgba(0,0,0,0.6); margin: 0 auto; max-width: 900px; border-radius: 10px; padding: 10px 0; }
    .line { display: flex; justify-content: center; align-items: center; font-size: var(--list-font); padding: 4px 0; }
    .left-col { width: 40%; text-align: right; padding-right: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .right-col { width: 40%; text-align: left; padding-left: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

    @media (max-width: 820px) {
      .filter-buttons { display: none; }
      .font-controls-mobile { display: flex; }
    }
  </style>
</head>
<body>
  <div class="top-meta"><div class="meta-wrap"><div id="last-update">Update: —</div><div id="song-count">— liedjes</div></div></div>
  <div class="top-bar">
    <div class="filter-buttons" id="buttons"></div>
    <div class="filter-row">
      <div class="font-controls-mobile"><button id="font-dec" class="font-btn">A−</button><button id="font-inc" class="font-btn">A+</button></div>
      <input type="text" id="search" placeholder="Zoek op uitvoerder of titel..." />
    </div>
  </div>
  <div class="content"><div id="song-list">Laden...</div></div>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    let allSongs = [], totalCount = 0, lastLoaded = null, fontSize = 1.15;
    function formatDate(d){return new Intl.DateTimeFormat('nl-BE',{day:'2-digit',month:'2-digit',year:'numeric'}).format(d)}
    function loadSongs(){
      Papa.parse("songs.csv?ts="+Date.now(),{download:true,header:true,skipEmptyLines:'greedy',complete:r=>{
        lastLoaded=new Date(); allSongs=r.data.map(o=>({uitvoerder:o.uitvoerder||o.artist||'',titel:o.titel||o.title||''}))
        .filter(s=>s.uitvoerder&&s.titel); totalCount=allSongs.length; displaySongs(allSongs);}})}
    function displaySongs(s){let l=document.getElementById('song-list');l.innerHTML='';s.sort((a,b)=>a.uitvoerder.localeCompare(b.uitvoerder))
      .forEach(x=>l.innerHTML+=`<div class='line'><div class='left-col'>${x.uitvoerder}</div><div class='right-col'>${x.titel}</div></div>`);
      document.getElementById('last-update').textContent='Update: '+formatDate(lastLoaded);
      document.getElementById('song-count').textContent=`${totalCount} liedjes`;document.querySelector('.content').scrollTo({top:0})}
    document.getElementById('search').addEventListener('input',e=>{let t=e.target.value.toLowerCase();
      displaySongs(t?allSongs.filter(s=>s.uitvoerder.toLowerCase().includes(t)||s.titel.toLowerCase().includes(t)):allSongs)});
    document.addEventListener('click',e=>{if(e.target.id=='font-dec')fontSize=Math.max(.85,fontSize-.05);
      if(e.target.id=='font-inc')fontSize=Math.min(1.4,fontSize+.05);
      document.documentElement.style.setProperty('--list-font',fontSize+'em');});
    loadSongs();
  </script>
</body>
</html>
